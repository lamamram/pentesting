# on chiffre un message en utilisant 
# une permutation complète de l'alphabet 
# une chaine de 26 caractères contenant chaque lettre
# dans le désordre complet
import random
from string import ascii_lowercase

message = "bonjourtoutlemonde"

# print(ascii_lowercase)
def generate_key():
    letters = list(ascii_lowercase)
    while True:
        random.shuffle(letters)
        # eq à
        # def unequal(e1, e2):
        #     return e1 != e2
        # application de la fonction lambda
        # sur les paires d'indices de deux itérable
        # permutation complète: le map vaut vrai pour tous les indices
        if all(map(lambda e1, e2: e1 != e2, ascii_lowercase, letters)):
            return "".join(letters)

# chiffrement du message d'après les code ascii 
# des caractères de la clé 
def encrypt(msg, key):
    cipher = ""
    for letter in msg:
        cipher += key[ord(letter) - 97]
    return cipher

def decrypt(cipher, key):
    clear = ""
    for letter in cipher:
        clear += chr(key.index(letter) + 97 )
    return clear

if __name__ == "__main__":
    key = generate_key()
    print(f"clé: {key}")

    # code ascii d'un caractère
    # indice dans ascii_lowercase: - 97
    # print(key[ord("a") - 97], key[ord("z") - 97])

    cipher = encrypt(message, key)
    print(f"chiffré: {cipher}")

    # caractère d'un code ascii
    # print(chr(key.index("a") + 97 ), chr(key.index("z") + 97))

    clear = decrypt(cipher, key)
    print(f"texte en clair: {clear}")