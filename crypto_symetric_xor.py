from itertools import cycle
# message encodé en octets
# clé encodée en octets
# répéter la clé jusqu'à obtenir un chaine de longueur égale au message
# pour chaque lettre du message, opérer un xor sur les octets



message = "bonjourtoutlemonde"
key = "hello"

def xor_crypt(msg, key):
    mask = ""
    cipher = ""
    i = 0
    for letter in cycle(key):
        mask += letter
        if len(mask) == len(msg):
            break
    
    for i, l in enumerate(msg):
        cipher += chr(ord(l) ^ ord(mask[i]))
    return cipher



if __name__ == "__main__":
    cipher = xor_crypt(message, key)
    clear = xor_crypt(cipher, key)
    print(clear)
