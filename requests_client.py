import requests

URL = "https://dawan.fr"

session = requests.Session()

# try:
#     r = session.get(URL)
#     if 200 <= r.status_code < 300:
#         if "text/html" in r.headers["content-type"]:
#             # print(r.text)
#             pass
# except requests.ConnectionError as e:
#     print(f"couldn't connect to {URL}")


## appel en post
URL = "https://gorest.co.in/public/v2"
TOKEN = "f272e67cd0429faafae6fba2a892b9464b60fe6fe03621db530f667a62f86cd2"
endpoint = "users"

user = {
    "name": "matt lamam",
    "email": "matt@example.com",
    "gender": "male",
    "status": "inactive"
}

try:
    headers = {"authorization": f"Bearer {TOKEN}"}
    r = session.post(f"{URL}/{endpoint}", data=user, headers=headers)
    if 200 <= r.status_code < 300:
        if "application/json" in r.headers["content-type"]:
            print(r.json())
    else: raise ValueError(f"bad status {r.status_code}: {r.json()}")
except requests.ConnectionError as e:
    print(f"couldn't connect to {URL}")
except ValueError as e:
    print(e)